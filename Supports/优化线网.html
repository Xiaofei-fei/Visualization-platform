<!DOCTYPE html>
<html lang="en" daily_flag="2" secure_city="028,010" secure_cityname="北京市">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


  <title>公交大数据</title>
  <link rel="stylesheet" href="./css/common.css" class="AMap.style">
  <link rel="stylesheet" href="./css/index.css">
  <!-- 浮动框css -->
  <link rel="stylesheet" href="./css/windowFloatFirst.css">
  <!-- 浮动框css -->
  <link rel="stylesheet" href="./公交大数据_files/bootstrap.min.css">
  <link href="./公交大数据_files/global.css" rel="stylesheet">
  <link href="./公交大数据_files/gri.controls.css" rel="stylesheet">
  <link href="./公交大数据_files/datepicker.min.css" rel="stylesheet">
  <link href="./公交大数据_files/pagination.css" rel="stylesheet">
  <link rel="stylesheet" href="./公交大数据_files/kuma.css">
  <link href="./公交大数据_files/main.css" rel="stylesheet">
  <link href="./公交大数据_files/index.css" rel="stylesheet">
  <script src="./公交大数据_files/jquery-1.11.1.min.js"></script>
  <script src="./公交大数据_files/bootstrap.min.js"></script>
  <script src="./公交大数据_files/vue.min.js"></script>
  <script src="./公交大数据_files/vue-router.min.js"></script>
  <script src="./公交大数据_files/jquery.mousewheel.min.js"></script>
  <script src="./公交大数据_files/jquery.pagination.js"></script>
  <script src="./公交大数据_files/jquery.circliful.min.js"></script>
  <script src="./公交大数据_files/jquery.cookie.js"></script>
  <script src="./公交大数据_files/tween.js"></script>
  <script src="./公交大数据_files/underscore.js"></script>
  <script src="./公交大数据_files/velocity.js"></script>
  <script src="./公交大数据_files/velocity.ui.js"></script>
  <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
  <!-- <script src="./js/axios.min.js"></script> -->
</head>

<body>
  <div id="app">
    <!-- 浮动框 -->
    <div class="windowFloat" :style="{'display':isFloat1?'block':'none', 'bottom': '300px'}">
      <div class="header-windowFloat">
        <div class="left">
          <img src="./image/tj.png" alt="" srcset="">
          <span>统计信息</span>
        </div>
        <div class="right">
          <div class="r-box">
            <img src="./image/ss.png" alt="" @click="closeFloat1">
          </div>
        </div>
      </div>
      <div class="body-windowFloat">
        <p>线路名称：{{floatData.line_name}}</p>
        <div id="radarChart"></div>
        <!-- <ul>
                <li>
                    <span class="title">线路名称</span>
                    <i class="value">{{floatData.line_name}}</i>
                </li>
                <li>
                    <span class="title">总目标值</span>
                    <i class="value">{{floatData.sum}}</i>
                </li>
                <li>
                    <span class="title">行程时间稳定性</span>
                    <i class="value">{{floatData.travelTimeStability}}</i>
                </li>
                <li>
                    <span class="title">归一化线路需求量</span>
                    <i class="value">{{floatData.normalizedLineCommutingDemand}}</i>
                </li>
                <li>
                    <span class="title">线路通勤时间比倒数</span>
                    <i class="value">{{floatData.lineCommutingTimeRatioReciprocal}}</i>
                </li>
                <li>
                    <span class="title">归一化客流服务人次</span>
                    <i class="value">{{floatData.normalizedPassengerFlowServicePersonTimes}}</i>
                </li>
            </ul> -->
      </div>
    </div>
    <div class="windowFloat" :style="{'display':isFloat?'block':'none'}">
      <div class="header-windowFloat">
        <div class="left">
          <img src="./image/pie.png" alt="" srcset="">
          <span>指标信息</span>
        </div>
        <div class="right">
          <div class="r-box">
            <img src="./image/ss.png" alt="" @click="closeFloat">
          </div>
        </div>
      </div>
      <div class="floatBoxEchart">
        <p>线路名称：{{floatPieData.line_name}}</p>
        <div class="ebox">
          <div id="firstPie"></div>
          <div id="twoPie"></div>
          <div id="threePie"></div>
        </div>
      </div>

    </div>
    <!-- 浮动框 -->
    <div class="amap_bg amap-container" id="amap" style="background: rgb(24, 36, 51);">
      <object
        style="display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"
        type="text/html" data="./公交大数据_files/saved_resource.html"></object>
      <div class="amap-maps">
        <div class="amap-drags">
          <div class="amap-layers" style="transform: translateZ(0px);">
            <div class="amap-markers" style="position: absolute; z-index: 120; top: 364px; left: 720px;">
            </div>
            <div class="amap-layer" style="position: absolute; z-index: 0; top: 470px; left: 983px; display: block;">
              <canvas height="256" width="256"
                style="position: absolute; top: -9px; left: 201px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: 201px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: 201px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -9px; left: -823px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: -823px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: -823px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: -55px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: -311px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: -567px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -9px; left: -55px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: -55px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -9px; left: -311px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: -311px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -9px; left: -567px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: -567px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: 247px; left: 201px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256" ;
                style="position: absolute; top: 247px; left: -55px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: 247px; left: -311px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: 247px; left: -567px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: 247px; left: -823px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -9px; left: -1079px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -265px; left: -1079px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: -521px; left: -1079px; width: 256px; height: 256px; z-index: 11;"></canvas><canvas
                height="256" width="256"
                style="position: absolute; top: 247px; left: -1079px; width: 256px; height: 256px; z-index: 11;"></canvas>
            </div><canvas class="amap-layer" width="1440" height="729"
              style="position: absolute; z-index: 1; height: 729px; width: 1440px; top: 0px; left: 0px;"></canvas><canvas
              class="amap-layer amap-vectors" width="1440" height="729"
              style="position: absolute; z-index: 110; top: 0px; left: 0px; display: block;"></canvas><canvas
              class="amap-labels" draggable="false" width="1440" height="729"
              style="position: absolute; z-index: 99; height: 729px; width: 1440px; top: 0px; left: 0px;"></canvas>
          </div>
          <div class="amap-overlays"></div>
        </div>
      </div>
      <div style="display: none;"></div>
      <div class="amap-controls">
        <div class="amap-scalecontrol" style="left: 2px; bottom: 20px; visibility: visible;">
          <div class="amap-scale-text" style="width: 93.3421px;">5 公里</div>
          <div class="amap-scale-line">
            <div class="amap-scale-edgeleft"></div>
            <div class="amap-scale-edgeright" style="left: 86.3421px;"></div>
            <div class="amap-scale-middle" style="width: 85.3421px;"></div>
          </div>
        </div>
      </div><a class="amap-logo"><img src="./公交大数据_files/logo@1x.png"></a>
      <div class="amap-copyright" style="display: none; visibility: hidden;">
        <!--v1.4.15--> © 2021 AutoNavi <span class="amap-mcode"></span>
      </div>
    </div>
    <div class="top_bar" style="min-width: 1280px">
      <div class="city" id="city"><i class="cityLocation"></i><span class="citytext">北京</span><i class="down"></i>
      </div>
      <div class="topbar_right" style="min-width: 1280px">
        <ul class="parent">
          <li class="has_child active">
            <i class="navcurrent"></i>
            <a href="../index.html"><span>原始线网</span><i class="down"></i></a>
          </li>
          <li class="has_child">
            <a href="./路网状况.html"><span>路网状况</span><i class="down"></i></a>
          </li>
          <li></li>
          <li></li>
          <li class="has_child">
            <a href="./优化线网.html"><span>优化线网</span><i class="down"></i></a>
          </li>
          <li class="has_child">
            <a class="parent" href="javascript:void(0)"><span>数据发布</span><i class="down"></i></a>
          </li>
        </ul>
      </div>
      <div id="logo" style="background: url(public/image/title_center.png) no-repeat;background-size: 100%, 100%;">
        <img class="title_logo" src="./公交大数据_files/acme0.png">
        <span class="topbar_name"><span id="topbar_name">北京市公交线网优化</span></span>
      </div>
    </div>
    <div class="maincontent">

      <div class="nav_title fn-clear">

        <div class="buslineSearchWrap" style="display: none;">
        </div>
      </div>
    </div>
    <div id="seachBox">
      <input :value="currentItem.val" type="text" @focus="focusStart" @keyup="filter($event)" @blur="focusEnd"
        placeholder="搜索公交线" id="busline-search" autocomplete="off"><i class="icon-search2"></i>
      <div id="searchList" :style="{'display':isShow?'block':'none'}">
        <ul>
          <li key='item.id' @click="searchList($event)" v-for="item in liList">{{item.val}}</li>
        </ul>
      </div>
    </div>
    <div id="panel"></div>
    <div class="loading" v-show="loading">
      <div class="circle"></div>
    </div>
    <!-- 复选框 -->
    <div id="selectBar">
      <div class="select-item">
        <input type="checkbox" name="" value="ysxw" id="ysxw" v-model="ysxwFlag" @change="onSelectBarChange">
        <label for="ysxw">原始线网</label>
      </div>
      <div class="select-item">
        <input type="checkbox" name="" value="yhxw" id="yhxw" v-model="yhxwFlag" @change="onSelectBarChange">
        <label for="yhxw">优化线网</label>
      </div>
    </div>
  </div>
  <!-- <script type="text/javascript"
    src="https://webapi.amap.com/maps?v=1.4.15&key=2625c0c9182a614ecd3b20fddd7e1b62&plugin=AMap.Driving&plugin=AMap.Transfer&AMap.LineSearch">
    </script> -->
  <script type="text/javascript"
    src="https://webapi.amap.com/maps?v=1.4.15&key=2625c0c9182a614ecd3b20fddd7e1b62&plugin=AMap.Transfer&plugin=AMap.LineSearch"></script>
  <script>
    // 搜索数据
    const liList = [
      {
        "id": 1,
        "val": "130路(北官厅--东湖)"
      },
      {
        "id": 2,
        "val": "416路(东直门枢纽站--来广营西桥东)"
      },
      {
        "id": 3,
        "val": "421路(东湖--大北窑南)"
      },
      {
        "id": 4,
        "val": "467路(地铁善各庄站--静安庄)"
      },
      {
        "id": 5,
        "val": "467路(静安庄--地铁善各庄站)"
      },
      {
        "id": 6,
        "val": "536路(左家庄--屏翠西路东口)"
      },
      // {
      //   "id": 7,
      //   "val": "538路(孙河公交场站--国家体育场东)"
      // },
      {
        "id": 8,
        "val": "547路(地铁善各庄站--和平西桥)"
      },
      {
        "id": 9,
        "val": "593路(地铁北苑路北站--环行铁道)"
      },
      {
        "id": 10,
        "val": "657路(东湖--郎辛庄)"
      },
      {
        "id": 11,
        "val": "682路(青年路小区--阜安西路)"
      },
      {
        "id": 12,
        "val": "696路(国展新馆公交场站--芍药居公交场站)"
      },
      {
        "id": 13,
        "val": "696路(芍药居公交场站--国展新馆公交场站)"
      },
      {
        "id": 14,
        "val": "944路(奶子房--安贞桥西)"
      }
    ]
    // 优化线网数据
    const route = {
      "130路(北官厅--东湖)": [
        [116.45714, 39.985829], [116.457105, 39.986762], [116.457105, 39.986762], [116.457057, 39.987439], [116.457049, 39.987964], [116.45707, 39.988281], [116.45717, 39.988819], [116.457945, 39.988968, 116.458038, 39.988953], [116.458199, 39.988968], [116.460335, 39.989250], [116.461662, 39.989445], [116.461845, 39.989491], [116.461861, 39.989494], [116.462105, 39.989586], [116.463074, 39.990036], [116.463272, 39.989868], [116.464317, 39.989166], [116.464989, 39.988728, 116.464989, 39.988728], [116.464981, 39.988728], [116.465591, 39.988323], [116.465782, 39.988342], [116.466225, 39.988804], [116.466858, 39.989491], [116.466980, 39.989616], [116.467453, 39.990089], [116.467545, 39.990162], [116.467896, 39.990486], [116.468109, 39.990673, 116.468109, 39.990673], [116.468108, 39.990668], [116.468129, 39.990690], [116.468494, 39.991016], [116.469232, 39.991693], [116.470000, 39.992396], [116.470252, 39.992600], [116.470304, 39.992786], [116.469839, 39.993099], [116.469154, 39.993576], [116.468958, 39.993746], [116.468802, 39.993906], [116.468585, 39.994197], [116.468472, 39.994366], [116.468303, 39.994770], [116.468234, 39.995104], [116.468207, 39.995469], [116.468199, 39.995747, 116.468199, 39.995747], [116.468164, 39.996675], [116.468142, 39.996897], [116.468121, 39.997205], [116.468116, 39.997283], [116.468095, 39.997726], [116.468051, 39.999015], [116.467947, 40.000825, 116.467882, 40.002791], [116.467812, 40.004332], [116.467812, 40.004332], [116.467791, 40.004679], [116.467791, 40.004679], [116.467778, 40.004944], [116.467778, 40.005017], [116.467778, 40.005017], [116.467773, 40.005208], [116.467773, 40.005208], [116.467747, 40.006042], [116.467747, 40.006042], [116.467734, 40.00628], [116.467734, 40.00628], [116.467721, 40.006541, 116.467721, 40.006541], [116.467713, 40.006697], [116.467713, 40.006697], [116.467682, 40.007517], [116.467682, 40.007517], [116.467674, 40.008377], [116.467674, 40.008377], [116.467661, 40.008585], [116.466064, 40.008636, 116.466024, 40.008637], [116.466020, 40.008637], [116.465265, 40.008598], [116.464106, 40.008568], [116.464041, 40.008563], [116.462908, 40.008520], [116.462795, 40.008516], [116.461675, 40.008472], [116.460638, 40.008429], [116.460495, 40.008424], [116.459983, 40.008394], [116.459844, 40.008390]
      ],
      "416路(东直门枢纽站--来广营西桥东)": [
        [116.473465, 39.983307], [116.469849, 39.985661], [116.468979, 39.986237], [116.469032, 39.986290], [116.469490, 39.986691], [116.469673, 39.986839], [116.469727, 39.986897], [116.470047, 39.987167], [116.470169, 39.987289], [116.470444, 39.987537], [116.470863, 39.987919], [116.471031, 39.988068], [116.471230, 39.988251, 116.471215, 39.988234], [116.471372, 39.988372], [116.471372, 39.988372], [116.472031, 39.988984], [116.472031, 39.988984], [116.472365, 39.989284], [116.472365, 39.989284], [116.472752, 39.989635], [116.472752, 39.989635], [116.473069, 39.989939], [116.473069, 39.989939], [116.473368, 39.990234], [116.473485, 39.990343], [116.471741, 39.991848, 116.471733, 39.991852], [116.471405, 39.992081], [116.470703, 39.992535], [116.470383, 39.992737], [116.470642, 39.992924], [116.471031, 39.993263], [116.471199, 39.993401], [116.472481, 39.994568], [116.472542, 39.994614], [116.473564, 39.995583], [116.473824, 39.995796, 116.473785, 39.995768], [116.474041, 39.99599], [116.474041, 39.99599], [116.474661, 39.996549], [116.475438, 39.997253], [116.472992, 39.998978, 116.472900, 39.999046], [116.472008, 39.999630], [116.471664, 39.999863], [116.472420, 40.000591], [116.472641, 40.000790], [116.473068, 40.001217], [116.473122, 40.001266], [116.473228, 40.001389], [116.473358, 40.001553], [116.473404, 40.001633], [116.473450, 40.001808], [116.473442, 40.001904], [116.473404, 40.002556], [116.473404, 40.002697], [116.473358, 40.003769], [116.473343, 40.003994], [116.473335, 40.004177, 116.473338, 40.004193], [116.473316, 40.004575], [116.473316, 40.004575], [116.473312, 40.005039], [116.473312, 40.005039], [116.473303, 40.005265], [116.473299, 40.005334], [116.473299, 40.005334], [116.473268, 40.006345], [116.473268, 40.006345], [116.473212, 40.007405], [116.473212, 40.007405], [116.473207, 40.007674], [116.473207, 40.007674], [116.473194, 40.007873, 116.473194, 40.007873], [116.473155, 40.00862], [116.473142, 40.00872], [116.473142, 40.00872], [116.473095, 40.009614], [116.473095, 40.009614], [116.473064, 40.010421, 116.473064, 40.010421], [116.473051, 40.010664], [116.473051, 40.010664], [116.473016, 40.011393], [116.475914, 40.011448]
      ],
      "421路(东湖--大北窑南)": [
        [116.460035, 40.008303], [116.460421, 40.008316], [116.460503, 40.008320], [116.461502, 40.008364], [116.462826, 40.008411], [116.462878, 40.008411], [116.464045, 40.008459], [116.465265, 40.008507], [116.465434, 40.008516], [116.466042, 40.008537, 116.466042, 40.008537], [116.466367, 40.00855], [116.466367, 40.00855], [116.467235, 40.008576], [116.467461, 40.006588, 116.467468, 40.006676], [116.467461, 40.006676], [116.467476, 40.006020], [116.467499, 40.005661], [116.467529, 40.005199], [116.467529, 40.005013], [116.467529, 40.004929], [116.467545, 40.004681], [116.467590, 40.004093], [116.467690, 40.001957], [116.467690, 40.001686], [116.467690, 40.001587], [116.467705, 40.001270], [116.467705, 40.001217], [116.467705, 40.001179], [116.467712, 40.000935, 116.467720, 40.000885], [116.467717, 40.000881], [116.467726, 40.000694], [116.467778, 39.999275], [116.467795, 39.998902], [116.467847, 39.997661], [116.467886, 39.997270], [116.467891, 39.997196], [116.467912, 39.996884], [116.467969, 39.995829], [116.467969, 39.995725], [116.467973, 39.995686], [116.467999, 39.995161], [116.468034, 39.994887, 116.468030, 39.994913], [116.468034, 39.994913], [116.468038, 39.994878], [116.468073, 39.994727], [116.468155, 39.994514], [116.468268, 39.994293], [116.468277, 39.994266], [116.468390, 39.994084], [116.468550, 39.993863], [116.468702, 39.993698], [116.468915, 39.993503], [116.469084, 39.993364], [116.469857, 39.992834], [116.470143, 39.992652], [116.470247, 39.992587], [116.470556, 39.992383], [116.471458, 39.991784], [116.471619, 39.991675, 116.471766, 39.991576], [116.471927, 39.991471], [116.471927, 39.991471], [116.473351, 39.990521], [116.473351, 39.990521], [116.47355, 39.990404], [116.47355, 39.990404], [116.473806, 39.990234], [116.473841, 39.990213], [116.473841, 39.990213], [116.474258, 39.989939], [116.474258, 39.989939], [116.474427, 39.989826, 116.474365, 39.989872], [116.474350, 39.989861], [116.475113, 39.989346], [116.475594, 39.989040], [116.476425, 39.988483], [116.477112, 39.988029], [116.477303, 39.987900], [116.477608, 39.987701], [116.477814, 39.987564], [116.478783, 39.986893], [116.479218, 39.986599], [116.479408, 39.986473], [116.479652, 39.986305], [116.479965, 39.986069], [116.480087, 39.985985]
      ],
      "467路(地铁善各庄站--静安庄)": [
        [116.467122, 40.013698], [116.467131, 40.01355], [116.467131, 40.01355], [116.467183, 40.012348], [116.467183, 40.012348], [116.467187, 40.012205], [116.467205, 40.01194], [116.467205, 40.01194], [116.467222, 40.011606], [116.467227, 40.011463], [116.467227, 40.011463], [116.467279, 40.010438, 116.467279, 40.01043], [116.467296, 40.010117], [116.467296, 40.010117], [116.467378, 40.008854], [116.467378, 40.008854], [116.467378, 40.008689], [116.467387, 40.008585], [116.467387, 40.008585], [116.4674, 40.008368], [116.4674, 40.008368], [116.467448, 40.007526], [116.467448, 40.007526], [116.467457, 40.007083], [116.467457, 40.007083], [116.467461, 40.006801], [116.467461, 40.006801], [116.467465, 40.006584, 116.467468, 40.006676], [116.467461, 40.006676], [116.467476, 40.006020], [116.467499, 40.005661], [116.467529, 40.005199], [116.467529, 40.005013], [116.467529, 40.004929], [116.467545, 40.004681], [116.467590, 40.004093], [116.467690, 40.001957], [116.467690, 40.001686], [116.467690, 40.001587], [116.467705, 40.001270], [116.467705, 40.001217], [116.467705, 40.001179], [116.467712, 40.000935, 116.467720, 40.000885], [116.467717, 40.000881], [116.467726, 40.000694], [116.467778, 39.999275], [116.467795, 39.998902], [116.467847, 39.997661], [116.467886, 39.997270], [116.467891, 39.997196], [116.467912, 39.996884], [116.467969, 39.995829], [116.467969, 39.995725], [116.467973, 39.995686], [116.467999, 39.995161], [116.468034, 39.994887, 116.468034, 39.994887], [116.468038, 39.994878], [116.468073, 39.994727], [116.468155, 39.994514], [116.468268, 39.994293], [116.468277, 39.994266], [116.468390, 39.994084], [116.468550, 39.993863], [116.468702, 39.993698], [116.468915, 39.993503], [116.469084, 39.993364], [116.469857, 39.992834], [116.470143, 39.992652], [116.470061, 39.992569], [116.469909, 39.992431], [116.469067, 39.991645], [116.468086, 39.990764, 116.468010, 39.990688], [116.468002, 39.990688], [116.467850, 39.990547], [116.467812, 39.990513], [116.467514, 39.990234], [116.467484, 39.990204], [116.466919, 39.989697], [116.466766, 39.989552], [116.466118, 39.988857], [116.465668, 39.988407], [116.465584, 39.988327], [116.465248, 39.987976], [116.464043, 39.986919], [116.463493, 39.986523], [116.463051, 39.986286], [116.462677, 39.986111, 116.462593, 39.986076], [116.462601, 39.986076], [116.462593, 39.986076], [116.462379, 39.985996], [116.459984, 39.985325], [116.459625, 39.985237], [116.458542, 39.984943], [116.458267, 39.984852], [116.457367, 39.984432], [116.457146, 39.984200], [116.456833, 39.983688], [116.456764, 39.983528], [116.456657, 39.983307]
      ],
      "467路(静安庄--地铁善各庄站)": [
        [116.456863, 39.983433], [116.456902, 39.983486], [116.456970, 39.983650], [116.457153, 39.984215], [116.457611, 39.984390], [116.458275, 39.984745], [116.458466, 39.984825], [116.458763, 39.984921], [116.459648, 39.985146], [116.459869, 39.985203], [116.460175, 39.985283], [116.461411, 39.985622], [116.462402, 39.985886], [116.462807, 39.986046], [116.463226, 39.986244], [116.463615, 39.986477, 116.463615, 39.986477], [116.463615, 39.986481], [116.463623, 39.986485], [116.463631, 39.986485], [116.463875, 39.986637], [116.464096, 39.986813], [116.464462, 39.987129], [116.465675, 39.988262], [116.465767, 39.988342], [116.466232, 39.988796], [116.466858, 39.989491], [116.466980, 39.989616], [116.467552, 39.990147], [116.467911, 39.990479], [116.468208, 39.990765, 116.473785, 39.99577], [116.468163, 39.990719, 116.473785, 39.995768], [116.474041, 39.99599], [116.474041, 39.99599], [116.474661, 39.996549], [116.475438, 39.997253], [116.472992, 39.998978, 116.472900, 39.999046], [116.472008, 39.999630], [116.471664, 39.999863], [116.472420, 40.000591], [116.472641, 40.000790], [116.473068, 40.001217], [116.473122, 40.001266], [116.473228, 40.001389], [116.473358, 40.001553], [116.473404, 40.001633], [116.473450, 40.001808], [116.473442, 40.001904], [116.473404, 40.002556], [116.473404, 40.002697], [116.473358, 40.003769], [116.473343, 40.003994], [116.473335, 40.004177, 116.473338, 40.004193], [116.473316, 40.004575], [116.473316, 40.004575], [116.473312, 40.005039], [116.473312, 40.005039], [116.473303, 40.005265], [116.473299, 40.005334], [116.473299, 40.005334], [116.473268, 40.006345], [116.473268, 40.006345], [116.473212, 40.007405], [116.473212, 40.007405], [116.473207, 40.007674], [116.473207, 40.007674], [116.473194, 40.007873, 116.473194, 40.007873], [116.473155, 40.00862], [116.473142, 40.00872], [116.473142, 40.00872], [116.473095, 40.009614], [116.473095, 40.009614], [116.473064, 40.010421, 116.473061, 40.010426], [116.473061, 40.010487], [116.473053, 40.010670], [116.473015, 40.011459], [116.472969, 40.011597], [116.472633, 40.011589], [116.471855, 40.011589], [116.471321, 40.011589], [116.470818, 40.011597], [116.470192, 40.011593], [116.468727, 40.011620], [116.467796, 40.011612], [116.467537, 40.011604], [116.467484, 40.011948], [116.467445, 40.012348], [116.467430, 40.013062], [116.467422, 40.013260], [116.467415, 40.013542]
      ],
      "536路(左家庄--屏翠西路东口)": [
        [116.466766, 39.978596], [116.466751, 39.978607], [116.466751, 39.978611], [116.466751, 39.978607], [116.467735, 39.979496], [116.469269, 39.980904], [116.469894, 39.981464], [116.470070, 39.981632, 116.470154, 39.981682], [116.470192, 39.981724], [116.470436, 39.981945], [116.470497, 39.981991], [116.470917, 39.982372], [116.471687, 39.983067], [116.472504, 39.983803], [116.472359, 39.983944], [116.472229, 39.984016], [116.472183, 39.984127], [116.471718, 39.984440], [116.470116, 39.985489], [116.469749, 39.985725], [116.469734, 39.985737, 116.469910, 39.985622], [116.469910, 39.985626], [116.469688, 39.985767], [116.468979, 39.986237], [116.467262, 39.987358], [116.467201, 39.987396], [116.466949, 39.987568], [116.466614, 39.987785, 116.464989, 39.988728], [116.464981, 39.988728], [116.465591, 39.988323], [116.465782, 39.988342], [116.466225, 39.988804], [116.466858, 39.989491], [116.466980, 39.989616], [116.467453, 39.990089], [116.467545, 39.990162], [116.467896, 39.990486], [116.468109, 39.990673, 116.473785, 39.99577], [116.468163, 39.990719, 116.473793, 39.995777], [116.473793, 39.995773], [116.473999, 39.995956], [116.474648, 39.996544], [116.475441, 39.997253], [116.475510, 39.997314], [116.475685, 39.997471], [116.475983, 39.997681], [116.476364, 39.997902], [116.476578, 39.998016], [116.477051, 39.998199], [116.477150, 39.998241], [116.477425, 39.998325, 116.477425, 39.998325], [116.47828, 39.998512], [116.478923, 39.99859], [116.478854, 39.999478], [116.478775, 40.000820], [116.478767, 40.000816], [116.478767, 40.001102], [116.478760, 40.001259], [116.478714, 40.001827], [116.478699, 40.002014], [116.478699, 40.002098], [116.478638, 40.003258], [116.478622, 40.003456, 116.478630, 40.003510], [116.478622, 40.003506], [116.478554, 40.004944], [116.478508, 40.006012], [116.478439, 40.007305, 116.478303, 40.010204], [116.478299, 40.010252], [116.478299, 40.010252], [116.478294, 40.010386], [116.478294, 40.010386], [116.478247, 40.011437], [116.478221, 40.0116], [116.475883, 40.011589, 116.475881, 40.011584], [116.475573, 40.011584], [116.475573, 40.011584], [116.474926, 40.011593], [116.474926, 40.011593], [116.473299, 40.011597], [116.473299, 40.011597], [116.473008, 40.011593], [116.472898, 40.013246], [116.472855, 40.014228], [116.474754, 40.014187], [116.477257, 40.01421]
      ],
      "538路(孙河公交场站--国家体育场东)": [
        [116.45911, 39.997127], [116.457635, 39.997105], [116.457474, 39.997105], [116.457474, 39.997105], [116.4573, 39.997101], [116.4573, 39.997101], [116.455343, 39.997044], [116.455343, 39.997044], [116.455078, 39.997044], [116.454388, 39.99704, 116.480354, 39.986057], [116.480354, 39.986053], [116.479820, 39.986420], [116.478859, 39.987106], [116.478142, 39.987625], [116.477814, 39.987865], [116.477394, 39.987831], [116.477051, 39.987568], [116.476883, 39.987446], [116.476669, 39.987282, 116.476669, 39.987282], [116.476669, 39.987278], [116.476112, 39.986877], [116.475922, 39.986736], [116.474945, 39.986034], [116.474602, 39.985786], [116.474045, 39.985340], [116.473541, 39.984890, 116.473546, 39.984891], [116.473385, 39.984748], [116.473385, 39.984748], [116.472639, 39.984067], [116.472639, 39.984067], [116.472496, 39.983928], [116.46991, 39.985626, 116.469910, 39.985622], [116.469910, 39.985626], [116.469688, 39.985767], [116.468979, 39.986237], [116.467262, 39.987358], [116.467201, 39.987396], [116.466949, 39.987568], [116.466614, 39.987785], [116.464922, 39.988902], [116.463388, 39.989938], [116.463076, 39.990546], [116.463051, 39.991039, 116.463058, 39.990959], [116.463058, 39.990955], [116.463043, 39.991520], [116.462967, 39.992836], [116.462952, 39.993423], [116.462906, 39.994286], [116.462906, 39.994423], [116.462891, 39.995049], [116.462883, 39.995342, 116.462873, 39.995456], [116.462869, 39.995677], [116.462869, 39.995677], [116.46286, 39.995951], [116.46286, 39.995951], [116.462795, 39.997083], [116.459114, 39.997128]
      ],
      "547路(地铁善各庄站--和平西桥)": [
        [116.478172, 40.010464], [116.478257, 40.008716], [116.476202, 40.008736], [116.47307, 40.00872], [116.473091, 40.008377, 116.473096, 40.008395], [116.473122, 40.007668], [116.473137, 40.007397], [116.473160, 40.006859], [116.473175, 40.006340], [116.473228, 40.005325], [116.469810, 40.005135], [116.469177, 40.005100], [116.467781, 40.005016], [116.467529, 40.004932], [116.467545, 40.004738], [116.467590, 40.004093], [116.467659, 40.002583], [116.467674, 40.002068], [116.467690, 40.001949], [116.467690, 40.001793], [116.467690, 40.001690], [116.466698, 40.001549, 116.466698, 40.001549], [116.465515, 40.001385], [116.465118, 40.001347], [116.464714, 40.001282], [116.464111, 40.001202], [116.462952, 40.001038], [116.462791, 40.000916], [116.462738, 39.999489, 116.462738, 39.999493], [116.462626, 39.997211], [116.459114, 39.997128, 116.45911, 39.997127], [116.457635, 39.997105], [116.457474, 39.997105], [116.457474, 39.997105], [116.4573, 39.997101], [116.4573, 39.997101], [116.455343, 39.997044], [116.455343, 39.997044], [116.455078, 39.997044], [116.454388, 39.99704]
      ],
      "593路(地铁北苑路北站--环行铁道)": [
        [116.460035, 40.008303], [116.460421, 40.008316], [116.460503, 40.008320], [116.461502, 40.008364], [116.462826, 40.008411], [116.462878, 40.008411], [116.464045, 40.008459], [116.465265, 40.008507], [116.465434, 40.008516], [116.466042, 40.008537, 116.466042, 40.008537], [116.466367, 40.00855], [116.466367, 40.00855], [116.467235, 40.008576], [116.467461, 40.006588, 116.467468, 40.006676], [116.467461, 40.006676], [116.467476, 40.006020], [116.467499, 40.005661], [116.467529, 40.005199], [116.467529, 40.005013], [116.467529, 40.004929], [116.467545, 40.004681], [116.467590, 40.004093], [116.467690, 40.001957], [116.467690, 40.001686], [116.467690, 40.001587], [116.467705, 40.001270], [116.467705, 40.001217], [116.467705, 40.001179], [116.467712, 40.000935, 116.467720, 40.000885], [116.467717, 40.000881], [116.467726, 40.000694], [116.467778, 39.999275], [116.467795, 39.998902], [116.467847, 39.997661], [116.467886, 39.997270], [116.467891, 39.997196], [116.467912, 39.996884], [116.467969, 39.995829], [116.467969, 39.995725], [116.467973, 39.995686], [116.467999, 39.995161], [116.468034, 39.994887, 116.468030, 39.994913], [116.468034, 39.994913], [116.468038, 39.994878], [116.468073, 39.994727], [116.468155, 39.994514], [116.468268, 39.994293], [116.468277, 39.994266], [116.468390, 39.994084], [116.468550, 39.993863], [116.468702, 39.993698], [116.468915, 39.993503], [116.469084, 39.993364], [116.469857, 39.992834], [116.470143, 39.992652], [116.470247, 39.992587], [116.470556, 39.992383], [116.471458, 39.991784], [116.471619, 39.991675, 116.471766, 39.991576], [116.471927, 39.991471], [116.471927, 39.991471], [116.473351, 39.990521], [116.473351, 39.990521], [116.47355, 39.990404], [116.47355, 39.990404], [116.473806, 39.990234], [116.473841, 39.990213], [116.473841, 39.990213], [116.474258, 39.989939], [116.474258, 39.989939], [116.474427, 39.989826, 116.474365, 39.989872], [116.474350, 39.989861], [116.475113, 39.989346], [116.475594, 39.989040], [116.476425, 39.988483], [116.477112, 39.988029], [116.477303, 39.987900], [116.477608, 39.987701], [116.477814, 39.987564], [116.478783, 39.986893], [116.479218, 39.986599], [116.479408, 39.986473], [116.479652, 39.986305], [116.479965, 39.986069], [116.480087, 39.985985]
      ],
      "657路(东湖--郎辛庄)": [
        [116.460035, 40.008303], [116.460421, 40.008316], [116.460503, 40.008320], [116.461502, 40.008364], [116.462826, 40.008411], [116.462878, 40.008411], [116.464045, 40.008459], [116.465265, 40.008507], [116.465434, 40.008516], [116.466042, 40.008537, 116.466042, 40.008537], [116.466367, 40.00855], [116.466367, 40.00855], [116.467235, 40.008576], [116.467461, 40.006588, 116.467461, 40.006699], [116.467476, 40.006020], [116.467499, 40.005661], [116.467529, 40.005199], [116.467529, 40.005013], [116.467529, 40.004929], [116.467545, 40.004681], [116.467590, 40.004093], [116.467690, 40.001957], [116.467690, 40.001686], [116.466759, 40.001556, 116.466698, 40.001549], [116.465515, 40.001385], [116.465118, 40.001347], [116.464714, 40.001282], [116.464111, 40.001202], [116.462952, 40.001038], [116.462791, 40.000916], [116.462738, 39.999489, 116.462739, 39.999492], [116.462726, 39.999201], [116.462726, 39.999201], [116.462674, 39.997179], [116.462674, 39.997083], [116.462674, 39.997083], [116.462687, 39.99651], [116.462687, 39.99651], [116.462695, 39.996181, 116.462692, 39.996281], [116.462724, 39.995557], [116.462753, 39.995014], [116.462781, 39.994447], [116.462784, 39.994355], [116.462790, 39.994138], [116.462812, 39.993405], [116.462845, 39.992706], [116.462882, 39.992041], [116.462908, 39.991519], [116.462929, 39.990959], [116.462929, 39.990955], [116.462929, 39.990551], [116.462952, 39.990311], [116.462967, 39.990234], [116.462990, 39.990166], [116.463036, 39.990086], [116.463074, 39.990036], [116.463158, 39.989956], [116.463264, 39.989864], [116.464325, 39.989162], [116.464996, 39.988720, 116.464996, 39.988720], [116.465591, 39.988323], [116.465698, 39.988258], [116.466526, 39.987722], [116.466942, 39.987453], [116.467339, 39.987198], [116.467674, 39.986961], [116.468892, 39.986167], [116.469496, 39.985774], [116.469901, 39.985507], [116.470055, 39.985409], [116.470436, 39.985153], [116.470642, 39.985012], [116.470889, 39.984853, 116.470879, 39.984859], [116.470879, 39.984856], [116.471092, 39.984715], [116.471542, 39.984409], [116.472328, 39.983910], [116.472580, 39.983757], [116.472893, 39.983574], [116.473518, 39.983170], [116.473625, 39.983093], [116.473900, 39.982914]
      ],
      "682路(青年路小区--阜安西路)": [
        [116.473465, 39.983307], [116.469849, 39.985661], [116.468979, 39.986237], [116.469032, 39.986290], [116.469490, 39.986691], [116.469673, 39.986839], [116.469727, 39.986897], [116.470047, 39.987167], [116.470169, 39.987289], [116.470444, 39.987537], [116.470863, 39.987919], [116.471031, 39.988068], [116.471230, 39.988251, 116.471215, 39.988234], [116.471372, 39.988372], [116.471372, 39.988372], [116.472031, 39.988984], [116.472031, 39.988984], [116.472365, 39.989284], [116.472365, 39.989284], [116.472752, 39.989635], [116.472752, 39.989635], [116.473069, 39.989939], [116.473069, 39.989939], [116.473368, 39.990234], [116.473485, 39.990343], [116.471741, 39.991848, 116.471733, 39.991852], [116.471405, 39.992081], [116.470703, 39.992535], [116.470383, 39.992737], [116.470642, 39.992924], [116.471031, 39.993263], [116.471199, 39.993401], [116.472481, 39.994568], [116.472542, 39.994614], [116.473564, 39.995583], [116.473824, 39.995796, 116.473793, 39.995777], [116.473793, 39.995773], [116.473999, 39.995956], [116.474648, 39.996544], [116.475441, 39.997253], [116.475510, 39.997314], [116.475685, 39.997471], [116.475983, 39.997681], [116.476364, 39.997902], [116.476578, 39.998016], [116.477051, 39.998199], [116.477150, 39.998241], [116.477425, 39.998325, 116.477413, 39.998342], [116.477517, 39.998377], [116.477821, 39.998446], [116.478164, 39.998503], [116.478481, 39.998542], [116.478481, 39.998542], [116.478785, 39.998572], [116.478811, 39.998173], [116.478703, 39.997174], [116.478394, 39.996635]
      ],
      "696路(国展新馆公交场站--芍药居公交场站)": [
        [116.480392, 39.986027], [116.479820, 39.986420], [116.478859, 39.987106], [116.478142, 39.987625], [116.477814, 39.987865], [116.477493, 39.988064], [116.477272, 39.988205], [116.477051, 39.988342], [116.475861, 39.989132], [116.474854, 39.989803, 116.474854, 39.989803], [116.470313, 39.992782], [116.46957, 39.992106], [116.468102, 39.990768, 116.468010, 39.990688], [116.468002, 39.990688], [116.467850, 39.990547], [116.467812, 39.990513], [116.467514, 39.990234], [116.467484, 39.990204], [116.466919, 39.989697], [116.466766, 39.989552], [116.466118, 39.988857], [116.465668, 39.988407], [116.465584, 39.988327], [116.465248, 39.987976], [116.464043, 39.986919], [116.463493, 39.986523], [116.463051, 39.986286], [116.462677, 39.986111, 116.462593, 39.986076], [116.462601, 39.986076], [116.462593, 39.986076], [116.462379, 39.985996], [116.459984, 39.985325], [116.459625, 39.985237], [116.458542, 39.984943], [116.458267, 39.984852], [116.457367, 39.984432], [116.457146, 39.984200], [116.456833, 39.983688], [116.456764, 39.983528], [116.456657, 39.983307, 116.45658, 39.98319], [116.45651, 39.983077], [116.456298, 39.982795], [116.456298, 39.982795], [116.455751, 39.982005], [116.455022, 39.981146], [116.454266, 39.981594], [116.453026, 39.982426]
      ],
      "696路(芍药居公交场站--国展新馆公交场站)": [
        [116.456863, 39.983433], [116.456902, 39.983486], [116.456970, 39.983650], [116.457153, 39.984215], [116.457611, 39.984390], [116.458275, 39.984745], [116.458466, 39.984825], [116.458763, 39.984921], [116.459648, 39.985146], [116.459869, 39.985203], [116.460175, 39.985283], [116.461411, 39.985622], [116.462402, 39.985886], [116.462807, 39.986046], [116.463226, 39.986244], [116.463615, 39.986477, 116.463585, 39.986458], [116.463882, 39.986637], [116.465034, 39.987644], [116.465523, 39.988079], [116.465691, 39.988258], [116.466179, 39.987942], [116.466660, 39.987633], [116.466942, 39.987453], [116.467857, 39.986839], [116.468887, 39.986160], [116.469940, 39.985477], [116.470436, 39.985149], [116.470863, 39.984871, 116.470898, 39.984844], [116.471094, 39.984714], [116.471094, 39.984714], [116.471545, 39.98441], [116.471545, 39.98441], [116.472322, 39.983915], [116.473206, 39.984444, 116.473183, 39.984413], [116.473183, 39.984417], [116.473183, 39.984413], [116.473206, 39.984444], [116.473473, 39.984688], [116.474113, 39.985283], [116.474335, 39.985470], [116.475029, 39.985992], [116.476036, 39.986721], [116.476204, 39.986839], [116.476311, 39.986919], [116.476364, 39.986950], [116.476479, 39.987034, 116.476448, 39.987007], [116.477248, 39.987602], [116.477516, 39.987758], [116.478825, 39.986874], [116.48024, 39.985886, 116.480240, 39.985889], [116.480239, 39.985890], [116.480456, 39.985738], [116.480829, 39.985477], [116.481146, 39.985269], [116.481246, 39.985200], [116.481576, 39.984987], [116.482257, 39.984531], [116.482587, 39.984332], [116.482830, 39.984358], [116.484696, 39.986042], [116.485239, 39.986545], [116.485694, 39.986949], [116.486076, 39.987292], [116.486845, 39.987943], [116.487014, 39.988112], [116.487982, 39.988976], [116.488060, 39.989054], [116.488316, 39.989262], [116.489188, 39.990043]
      ],
      "944路(奶子房--安贞桥西)": [
        [116.467122, 40.013698], [116.467131, 40.01355], [116.467131, 40.01355], [116.467183, 40.012348], [116.467183, 40.012348], [116.467187, 40.012205], [116.467205, 40.01194], [116.467205, 40.01194], [116.467222, 40.011606], [116.467227, 40.011463], [116.467227, 40.011463], [116.467279, 40.010438, 116.467279, 40.01043], [116.467296, 40.010117], [116.467296, 40.010117], [116.467378, 40.008854], [116.467378, 40.008854], [116.467378, 40.008689], [116.467387, 40.008585], [116.467387, 40.008585], [116.4674, 40.008368], [116.4674, 40.008368], [116.467448, 40.007526], [116.467448, 40.007526], [116.467457, 40.007083], [116.467457, 40.007083], [116.467461, 40.006801], [116.467461, 40.006801], [116.467465, 40.006584, 116.467468, 40.006676], [116.467461, 40.006676], [116.467476, 40.006020], [116.467499, 40.005661], [116.467529, 40.005199], [116.467529, 40.005013], [116.467529, 40.004929], [116.467545, 40.004681], [116.467590, 40.004093], [116.467690, 40.001957], [116.467690, 40.001686], [116.467690, 40.001587], [116.467705, 40.001270], [116.467705, 40.001217], [116.467705, 40.001179], [116.467712, 40.000935, 116.467720, 40.000885], [116.467717, 40.000881], [116.467726, 40.000694], [116.467778, 39.999275], [116.467795, 39.998902], [116.467847, 39.997661], [116.467886, 39.997270], [116.467891, 39.997196], [116.467912, 39.996884], [116.467969, 39.995829], [116.467969, 39.995725], [116.467973, 39.995686], [116.467999, 39.995161], [116.468034, 39.994887, 116.468034, 39.994887], [116.468038, 39.994878], [116.468073, 39.994727], [116.468155, 39.994514], [116.468268, 39.994293], [116.468277, 39.994266], [116.468390, 39.994084], [116.468550, 39.993863], [116.468702, 39.993698], [116.468915, 39.993503], [116.469084, 39.993364], [116.469857, 39.992834], [116.470143, 39.992652], [116.470061, 39.992569], [116.469909, 39.992431], [116.469067, 39.991645], [116.468086, 39.990764, 116.468010, 39.990688], [116.468002, 39.990688], [116.467850, 39.990547], [116.467812, 39.990513], [116.467514, 39.990234], [116.467484, 39.990204], [116.466919, 39.989697], [116.466766, 39.989552], [116.466118, 39.988857], [116.465668, 39.988407], [116.465584, 39.988327], [116.465248, 39.987976], [116.464043, 39.986919], [116.463493, 39.986523], [116.463051, 39.986286], [116.462677, 39.986111, 116.462593, 39.986076], [116.462601, 39.986076], [116.462593, 39.986076], [116.462379, 39.985996], [116.459984, 39.985325], [116.459625, 39.985237], [116.458542, 39.984943], [116.458267, 39.984852], [116.457367, 39.984432], [116.457146, 39.984200], [116.456833, 39.983688], [116.456764, 39.983528], [116.456657, 39.983307, 116.45658, 39.98319], [116.45651, 39.983077], [116.456298, 39.982795], [116.456298, 39.982795], [116.455751, 39.982005], [116.455022, 39.981146], [116.454266, 39.981594], [116.453026, 39.982426]
      ]
    }
    // 饼图数据
    const afterData = [
      {
        "line_no": "Line130_B",
        "line_name": "130路(北官厅--东湖)",
        "oldData": 1.54,
        "newData": 1.79,
        "dataChange": 0.25
      },
      {
        "line_no": "Line416_A",
        "line_name": "416路(东直门枢纽站--来广营西桥东)",
        "oldData": 1.57,
        "newData": 1.76,
        "dataChange": 0.19
      },
      {
        "line_no": "Line421_B",
        "line_name": "421路(东湖--大北窑南)",
        "oldData": 1.82,
        "newData": 1.96,
        "dataChange": 0.14
      },
      {
        "line_no": "Line467_A",
        "line_name": "467路(地铁善各庄站--静安庄)",
        "oldData": 2.85,
        "newData": 2.14,
        "dataChange": -0.71
      },
      {
        "line_no": "Line467_B",
        "line_name": "467路(静安庄--地铁善各庄站)",
        "oldData": 2.95,
        "newData": 2.31,
        "dataChange": -0.64
      },
      {
        "line_no": "Line536_A",
        "line_name": "536路(左家庄--屏翠西路东口)",
        "oldData": 2.04,
        "newData": 2.06,
        "dataChange": 0.02
      },
      {
        "line_no": "Line538_A",
        "line_name": "538路(孙河公交场站--国家体育场东)",
        "oldData": 3.00,
        "newData": 2.25,
        "dataChange": -0.75
      },
      {
        "line_no": "Line547_A",
        "line_name": "547路(地铁善各庄站--和平西桥)",
        "oldData": 2.56,
        "newData": 2.20,
        "dataChange": -0.36
      },
      {
        "line_no": "Line593_A",
        "line_name": "593路(地铁北苑路北站--环行铁道)",
        "oldData": 1.78,
        "newData": 1.96,
        "dataChange": 0.18
      },
      {
        "line_no": "Line657_A",
        "line_name": "657路(东湖--郎辛庄)",
        "oldData": 2.09,
        "newData": 1.90,
        "dataChange": -0.19
      },
      {
        "line_no": "Line682_B",
        "line_name": "682路(青年路小区--阜安西路)",
        "oldData": 1.15,
        "newData": 1.60,
        "dataChange": 0.45
      },
      {
        "line_no": "Line696_A",
        "line_name": "696路(国展新馆公交场站--芍药居公交场站)",
        "oldData": 1.73,
        "newData": 1.97,
        "dataChange": 0.24
      },
      {
        "line_no": "Line696_B",
        "line_name": "696路(芍药居公交场站--国展新馆公交场站)",
        "oldData": 1.99,
        "newData": 2.23,
        "dataChange": 0.24
      },
      {
        "line_no": "Line944_A",
        "line_name": "944路(奶子房--安贞桥西)",
        "oldData": 1.80,
        "newData": 2.04,
        "dataChange": 0.24
      }
    ]
    // 统计信息数据
    const beforeList = [
      {
        "line_no": "Line130_B",
        "line_name": "130路(北官厅--东湖)",
        "sum": 1.54,
        "travelTimeStability": 0.81,
        "normalizedLineCommutingDemand": 0.12,
        "lineCommutingTimeRatioReciprocal": 0.38,
        "normalizedPassengerFlowServicePersonTimes": 0.24
      },
      {
        "line_no": "Line416_A",
        "line_name": "416路(东直门枢纽站--来广营西桥东)",
        "sum": 1.57,
        "travelTimeStability": 0.75,
        "normalizedLineCommutingDemand": 0.20,
        "lineCommutingTimeRatioReciprocal": 0.35,
        "normalizedPassengerFlowServicePersonTimes": 0.26
      },
      {
        "line_no": "Line421_B",
        "line_name": "421路(东湖--大北窑南)",
        "sum": 1.82,
        "travelTimeStability": 0.62,
        "normalizedLineCommutingDemand": 0.13,
        "lineCommutingTimeRatioReciprocal": 0.38,
        "normalizedPassengerFlowServicePersonTimes": 0.69
      },
      {
        "line_no": "Line467_A",
        "line_name": "467路(地铁善各庄站--静安庄)",
        "sum": 2.85,
        "travelTimeStability": 0.92,
        "normalizedLineCommutingDemand": 0.75,
        "lineCommutingTimeRatioReciprocal": 0.45,
        "normalizedPassengerFlowServicePersonTimes": 0.73
      },
      {
        "line_no": "Line467_B",
        "line_name": "467路(静安庄--地铁善各庄站)",
        "sum": 2.95,
        "travelTimeStability": 0.89,
        "normalizedLineCommutingDemand": 0.88,
        "lineCommutingTimeRatioReciprocal": 0.47,
        "normalizedPassengerFlowServicePersonTimes": 0.71
      },
      {
        "line_no": "Line536_A",
        "line_name": "536路(左家庄--屏翠西路东口)",
        "sum": 2.04,
        "travelTimeStability": 0.86,
        "normalizedLineCommutingDemand": 0.63,
        "lineCommutingTimeRatioReciprocal": 0.35,
        "normalizedPassengerFlowServicePersonTimes": 0.20
      },
      {
        "line_no": "Line538_A",
        "line_name": "538路(孙河公交场站--国家体育场东)",
        "sum": 3.00,
        "travelTimeStability": 0.75,
        "normalizedLineCommutingDemand": 0.98,
        "lineCommutingTimeRatioReciprocal": 0.44,
        "normalizedPassengerFlowServicePersonTimes": 0.83
      },
      {
        "line_no": "Line547_A",
        "line_name": "547路(地铁善各庄站--和平西桥)",
        "sum": 2.56,
        "travelTimeStability": 0.71,
        "normalizedLineCommutingDemand": 0.62,
        "lineCommutingTimeRatioReciprocal": 0.40,
        "normalizedPassengerFlowServicePersonTimes": 0.83
      },
      {
        "line_no": "Line593_A",
        "line_name": "593路(地铁北苑路北站--环行铁道)",
        "sum": 1.78,
        "travelTimeStability": 0.8,
        "normalizedLineCommutingDemand": 0.26,
        "lineCommutingTimeRatioReciprocal": 0.45,
        "normalizedPassengerFlowServicePersonTimes": 0.26
      },
      {
        "line_no": "Line657_A",
        "line_name": "657路(东湖--郎辛庄)",
        "sum": 2.09,
        "travelTimeStability": 0.61,
        "normalizedLineCommutingDemand": 0.24,
        "lineCommutingTimeRatioReciprocal": 0.50,
        "normalizedPassengerFlowServicePersonTimes": 0.75
      },
      {
        "line_no": "Line682_B",
        "line_name": "682路(青年路小区--阜安西路)",
        "sum": 1.15,
        "travelTimeStability": 0.61,
        "normalizedLineCommutingDemand": 0.05,
        "lineCommutingTimeRatioReciprocal": 0.40,
        "normalizedPassengerFlowServicePersonTimes": 0.09
      },
      {
        "line_no": "Line696_A",
        "line_name": "696路(国展新馆公交场站--芍药居公交场站)",
        "sum": 1.73,
        "travelTimeStability": 0.59,
        "normalizedLineCommutingDemand": 0.36,
        "lineCommutingTimeRatioReciprocal": 0.43,
        "normalizedPassengerFlowServicePersonTimes": 0.36
      },
      {
        "line_no": "Line696_B",
        "line_name": "696路(芍药居公交场站--国展新馆公交场站)",
        "sum": 1.99,
        "travelTimeStability": 0.74,
        "normalizedLineCommutingDemand": 0.30,
        "lineCommutingTimeRatioReciprocal": 0.40,
        "normalizedPassengerFlowServicePersonTimes": 0.56
      },
      {
        "line_no": "Line944_A",
        "line_name": "944路(奶子房--安贞桥西)",
        "sum": 1.80,
        "travelTimeStability": 0.81,
        "normalizedLineCommutingDemand": 0.22,
        "lineCommutingTimeRatioReciprocal": 0.41,
        "normalizedPassengerFlowServicePersonTimes": 0.35
      }
    ]


    var map = new AMap.Map("amap", {
      resizeEnable: true,
      center: [116.397428, 39.90923],
      zoom: 12,
      mapStyle: 'amap://styles/4e20baf67ef643952ae6357398c3c1c9'
    });

    new Vue({
      el: '#app',
      data: {
        liList: [],
        isShow: false,
        isFloat1: false,
        isFloat: false,
        route: route,//{}
        afterData: afterData, // 饼图数据
        beforeList,
        floatPieData: [],
        ysxwFlag: false,
        yhxwFlag: false,
        loading: false,
        currentItem: null,
        // 浮窗数据
        floatData: {}
      },
      /*
      created() {
        this.fetchRouteObjApi()
        this.fetchListApi()
        this.fetchAfterDataApi()
      },
      mounted() {
        this.drawCharts()
      },
      beforeDestory() {
        this.isFloat = false
      },
      destrory() {
        this.isFloat = false
      },
      */
      async created() {
        this.liList = await this.getliList()
      },
      mounted() {
        this.drawCharts()
      },
      beforeDestory() {
        this.isFloat1 = false
        this.isFloat = false
      },
      destrory() {
        this.isFloat1 = false
        this.isFloat = false
      },
      methods: {
        /*虚拟请求部分
        fetchRouteObjApi() {
          let t = this
          // 请求route的信息
          axios.get('/data/routeData.json')
            .then(function (res) {
              t.route = res.data
            })
            .catch(function (err) {
              console.log(error);
            });
        },
          // 请求优化后的数据
        fetchAfterDataApi() {
          let t = this
          axios.get('/data/afterData.json')
            .then(function (res) {
              t.afterData = res.data
            })
            .catch(function (err) {
              console.log(error);
            });
        },
          // 请求liList的信息
        fetchListApi() {
          let t = this
          // 请求route的信息
          axios.get('/data/initAfterData.json')
            .then(function (res) {
              t.liList = res.data
            })
            .catch(function (err) {
              console.log(error);
            });
        },
        */
        // 请求数据
        getliList(keyword) {
          // axios.get('http://test.com').then(res => {
          //     console.log(res);
          // })
          // 模拟请求
          this.loading = true
          return new Promise((resolve, reject) => {
            setTimeout(() => {
              let temp = liList.filter((item, index, arr) => {
                return item.val.indexOf(keyword) != -1
              })
              if (temp.length === 0) {
                result = liList
              } else {
                result = temp
              }
              this.loading = false
              resolve(result)
            }, 1000)
          })
        },
        searchList(e) {
          const name = e.target.innerText
          let currentItem = this.liList.find((o, index) => o.val === e.target.innerText)
          this.currentItem = currentItem
          this.ysxwFlag = true
          this.yhxwFlag = true
          this.clearYsxw()
          this.clearYhxw()
          this.renderYsxw(name)
          this.renderYhxw(name)
        },
        onSelectBarChange(e) {
          const type = e.target.value
          const checked = e.target.checked
          // console.log(type, checked, e);
          const name = this.currentItem.val
          if (!name) return
          const _handle1 = () => {
            this.isFloat1 = checked
            checked ? this.renderYsxw(name) : this.clearYsxw()
          }
          const _handle2 = () => {
            this.isFloat = checked
            checked ? this.renderYhxw(name) : this.clearYhxw()
          }
          switch (type) {
            case 'ysxw':
              _handle1()
              break;
            case 'yhxw':
              _handle2()
              break;
            default:
              break;
          }
        },
        // 渲染原始线网
        renderYsxw(name) {
          if (!name) return
          if (!this.linesearch) {
            this.linesearch = new AMap.LineSearch({
              pageIndex: 1,
              city: '北京',
              pageSize: 2,
              extensions: 'all'
            });
          }
          const matcher = name.match(/\((.+)--(.+)\)/)
          const start_stop = matcher[1]
          const end_stop = matcher[2]
          const nametmp = name.match(/([^\(]+)/)[1]
          //搜索“536”相关公交线路
          this.linesearch.search(nametmp, (status, result) => {
            console.log(status, result);
            if (status === 'complete' && result.info === 'OK') {
              result = result.lineInfo.filter(item => item.start_stop.match(start_stop) && item.end_stop.match(end_stop))
              this.lineSearch_Callback(result);
            } else {
              alert('原始线网：' + status);
            }
          });
          let obj = this.beforeList.find((o, index) => o.line_name === name)
          this.renderRadarChart(obj)
          this.floatData = obj
        },
        // 渲染雷达图
        renderRadarChart(dataObj) {

          const fieldMap = [
            { name: '总目标值', field: 'sum', max: 10 },
            { name: '行程时间/稳定性', field: 'travelTimeStability', max: 1 },
            { name: '归一化/线路需求量', field: 'normalizedLineCommutingDemand', max: 1 },
            { name: '线路通勤/时间比倒数', field: 'lineCommutingTimeRatioReciprocal', max: 1 },
            { name: '归一化客流/服务人次', field: 'normalizedPassengerFlowServicePersonTimes', max: 1 }]
          // console.log(11111, dataObj);
          const indicator = []
          const value = []
          fieldMap.forEach(item => {
            indicator.push({
              name: item.name,
              max: item.max
            })
            value.push(dataObj[item.field] || 0)
          })
          this.radarChart = echarts.init(document.getElementById('radarChart'));
          const option = {
            radar: {
              radius: '85',
              indicator,
              name: {
                textStyle: {
                  color: '#fff',
                  fontSize: 12,
                },
                formatter(params) {
                  return params.replace(/\//g, "\n");
                },
              }
            },
            series: [{
              type: 'radar',
              itemStyle: {
                color: '#F9713C'
              },
              data: [
                {
                  value
                }
              ]
            }]
          };
          this.radarChart.setOption(option)
        },
        clearYsxw() {
          if (this.yslxOverlayroup) {
            this.yslxOverlayroup.clearOverlays()
          }
        },
        // 渲染优化线网
        renderYhxw(name) {
          if (!name) return
          if (this.polyline) {
            map.remove(this.polyline);
          }
          if (this.startMarker) {
            map.remove(this.startMarker);
          }
          if (this.endMarker) {
            map.remove(this.endMarker);
          }

          this.polyline = new AMap.Polyline({
            path: this.route[name],
            strokeColor: "#3366FF",
            strokeOpacity: 1,
            strokeWeight: 4,
            strokeStyle: "dashed",
            strokeDasharray: [20, 3],
            showDir: true,
            isOutline: true,
            outlineColor: '#fff',
            borderWeight: 1.5,
            zIndex: 50
          });
          this.polyline.setMap(map);
          map.setFitView([this.polyline]);
          // 构造点标记
          this.startMarker = new AMap.Marker({
            icon: "https://webapi.amap.com/theme/v1.3/markers/b/start.png",
            position: this.route[name][0],
            anchor: 'bottom'
          });
          this.endMarker = new AMap.Marker({
            icon: "https://webapi.amap.com/theme/v1.3/markers/b/end.png",
            position: this.route[name][this.route[name].length - 1],
            anchor: 'bottom'

          });
          map.add(this.startMarker);
          map.add(this.endMarker);
          let obj = this.afterData.find((o, index) => o.line_name === name)
          this.floatPieData = obj
          this.isShow = false;
          this.isFloat1 = true
          this.isFloat = true
          this.drawCharts()
        },
        clearYhxw() {
          if (this.polyline) {
            map.remove(this.polyline);
          }
          if (this.startMarker) {
            map.remove(this.startMarker);
          }
          if (this.endMarker) {
            map.remove(this.endMarker);
          }
        },
        drawCharts() {
          // 基于准备好的dom，初始化echarts实例
          let myChart = echarts.init(document.getElementById("firstPie"));
          let myChart2 = echarts.init(document.getElementById("twoPie"));
          let myChart3 = echarts.init(document.getElementById("threePie"));
          // 旧指标数据
          let e = this.floatPieData.oldData;
          // 新指标数据
          let e2 = this.floatPieData.newData;
          // 差值数据
          let e3 = this.floatPieData.dataChange;
          // 判断差值是否是负数 动态修改颜色
          let colorSel = e3 > 0 ? '#90EE90' : '#B22222'

          let option = {
            title: {
              show: true,
              // 标题
              text: '旧指标值',
              // 副标题
              subtext: e,
              left: 'center',
              top: '37%',
              // 标题样式
              textStyle: {
                fontSize: "13",
                color: "white",
                align: 'center',
                fontWeight: "400",
                fontFamily: "DINPro, DINPro-Regular",
              },
              // 副标题样式
              subtextStyle: {
                color: "white",
              }
            },
            tooltip: {
              trigger: "item",
              formatter: "{d}%",
              show: false,
            },
            legend: {
              orient: "vertical",
              x: "left",
              show: false,
            },
            series: {
              name: "",
              type: "pie",
              radius: ["90%", "98%"],
              avoidLabelOverlap: true,
              hoverAnimation: false,
              label: {
                normal: {
                  show: false,
                  position: "center",
                },
                emphasis: {
                  show: false,
                },
              },
              labelLine: {
                normal: {
                  show: false,
                },
              },
              data: [
                {
                  value: e * 10,
                  name: "",
                  itemStyle: {
                    color: "#6790D8",
                  },
                },
                {
                  value: 100 - e * 10,
                  name: "",
                  itemStyle: {
                    color: "#1a3861",
                  },
                },
              ],
            },
          };
          let option2 = {
            title: {
              show: true,
              // 标题
              text: '新指标值',
              // 副标题
              subtext: e2,
              left: 'center',
              top: '37%',
              // 标题样式
              textStyle: {
                fontSize: "13",
                color: "white",
                align: 'center',
                fontWeight: "400",
                fontFamily: "DINPro, DINPro-Regular",
              },
              // 副标题样式
              subtextStyle: {
                color: "white",
              }
            },
            tooltip: {
              trigger: "item",
              formatter: "{d}%",
              show: false,
            },
            legend: {
              orient: "vertical",
              x: "left",
              show: false,
            },
            series: {
              name: "",
              type: "pie",
              radius: ["90%", "98%"],
              avoidLabelOverlap: true,
              hoverAnimation: false,
              label: {
                normal: {
                  show: false,
                  position: "center",
                },
                emphasis: {
                  show: false,
                },
              },
              labelLine: {
                normal: {
                  show: false,
                },
              },
              data: [
                {
                  value: e2 * 10,
                  name: "",
                  itemStyle: {
                    color: "#ac5353",
                  },
                },
                {
                  value: 100 - e2 * 10,
                  name: "",
                  itemStyle: {
                    color: "#1a3861",
                  },
                },
              ],
            },
          };
          let option3 = {
            title: {
              show: true,
              // 标题
              text: '指标变化',
              // 副标题
              subtext: e3,
              left: 'center',
              top: '37%',
              // 标题样式
              textStyle: {
                fontSize: "13",
                color: "white",
                align: 'center',
                fontWeight: "400",
                fontFamily: "DINPro, DINPro-Regular",
              },
              // 副标题样式
              subtextStyle: {
                color: "white",
              }
            },
            tooltip: {
              trigger: "item",
              formatter: "{d}%",
              show: false,
            },
            legend: {
              orient: "vertical",
              x: "left",
              show: false,
            },
            series: {
              name: "",
              type: "pie",
              radius: ["90%", "98%"],
              avoidLabelOverlap: true,
              hoverAnimation: false,
              label: {
                normal: {
                  show: false,
                  position: "center",
                },
                emphasis: {
                  show: false,
                },
              },
              labelLine: {
                normal: {
                  show: false,
                },
              },
              data: [
                {
                  value: e3 * 10,
                  name: "",
                  itemStyle: {
                    color: colorSel,
                  },
                }
              ],
            },
          };
          myChart.setOption(option);
          myChart2.setOption(option2);
          myChart3.setOption(option3);
        },
        /*公交路线查询服务返回数据解析概况*/
        lineSearch_Callback(dataArr) {
          var lineArr = dataArr;
          var lineNum = dataArr.length;
          if (lineNum == 0) {
          } else {
            for (var i = 0; i < lineNum; i++) {
              var pathArr = lineArr[i].path;
              var stops = lineArr[i].via_stops;
              var startPot = stops[0].location;
              var endPot = stops[stops.length - 1].location;
              if (i == 0) //作为示例，只绘制一条线路
                this.drawbusLine(startPot, endPot, pathArr);

            }
          }
        },
        /*绘制路线*/
        drawbusLine(startPot, endPot, BusArr) {
          //绘制起点，终点
          if (!this.yslxOverlayroup) {
            this.yslxOverlayroup = new AMap.OverlayGroup()
            this.yslxOverlayroup.setMap(map)
          }
          this.yslxOverlayroup.clearOverlays()
          const m1 = new AMap.Marker({
            map: map,
            position: startPot, //基点位置
            icon: "https://webapi.amap.com/theme/v1.3/markers/n/start.png",
            zIndex: 10
          });
          const m2 = new AMap.Marker({
            map: map,
            position: endPot, //基点位置
            icon: "https://webapi.amap.com/theme/v1.3/markers/n/end.png",
            zIndex: 10
          });
          //绘制乘车的路线
          const busPolyline = new AMap.Polyline({
            map: map,
            path: BusArr,
            showDir: true,
            strokeColor: "#09f",//线颜色
            strokeOpacity: 0.8,//线透明度
            isOutline: true,
            outlineColor: 'white',
            strokeWeight: 6//线宽
          });
          this.yslxOverlayroup.addOverlays([m1, m2, busPolyline])
          map.setFitView();
        },
        // 关闭浮窗
        closeFloat1() {
          this.isFloat1 = false
        },
        // 关闭浮窗
        closeFloat() {
          this.isFloat = false
        },
        focusStart() {
          this.reliList = this.liList
          this.isShow = true;
        },
        filter(e) {
          this.getliList(e.target.value).then(res => {
            this.liList = res
          })
        }
      }
    });
  </script>
</body>

</html>